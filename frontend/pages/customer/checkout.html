<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="shortcut icon" href="../../assets/images/favicon.ico" type="image/x-icon">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <link rel="stylesheet" href="../../assets/css/shared/style.css">
  <link rel="stylesheet" href="../../assets/css/customer/checkout.css">
  <title>Carregando...</title>
</head>
<body class="checkout-page">
  <div class="loader-content"><div class="loader-circle"></div></div>
  <header class="header"></header>

  <main class="checkout">
    <div class="checkout-container">
      <div class="checkout-topbar">
        <a href="/menu#checkout" class="top-link"><i class="fas fa-arrow-left"></i> Voltar ao carrinho</a>
      </div>
      <h1 class="checkout-title">Finalizar pedido</h1>

      <div class="checkout-grid">
        <section class="card" id="addressCard">
          <h2 class="card-title">Endereço de entrega</h2>
          <form id="addressForm" novalidate>
            <div class="form-row">
              <div class="form-group" style="grid-column: 1 / -1;">
                <label for="cep">CEP</label>
                <div class="input-with-action">
                  <input type="text" id="cep" name="cep" placeholder="00000-000" maxlength="9" autocomplete="postal-code" inputmode="numeric" required>
                  <button type="button" id="buscarCep" class="btn-light" aria-label="Buscar CEP"><i class="fas fa-search"></i></button>
                </div>
                <small class="input-error" id="cepError"></small>
              </div>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label for="endereco">Endereço</label>
                <input type="text" id="endereco" name="endereco" placeholder="Rua/Avenida" autocomplete="address-line1" required>
              </div>
              <div class="form-group number">
                <label for="numero">Número</label>
                <input type="text" id="numero" name="numero" placeholder="123" autocomplete="address-line2" required>
              </div>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label for="bairro">Bairro</label>
                <input type="text" id="bairro" name="bairro" placeholder="Bairro" required>
              </div>
              <div class="form-group">
                <label for="cidade">Cidade</label>
                <input type="text" id="cidade" name="cidade" placeholder="Cidade" required>
              </div>
              <div class="form-group uf">
                <label for="estado">UF</label>
                <input type="text" id="estado" name="estado" placeholder="SP" maxlength="2" required>
              </div>
            </div>
            <div class="form-row">
              <div class="form-group" style="grid-column: 1 / -1;">
                <label for="complemento">Complemento</label>
                <input type="text" id="complemento" name="complemento" placeholder="Apto, bloco... (opcional)">
              </div>
            </div>
          </form>
        </section>

        <section class="card" id="summaryCard">
          <h2 class="card-title">Resumo do pedido</h2>
          <div id="orderItems" class="order-items"></div>
          <div class="totals">
            <div class="row"><span>Itens</span><span id="resumoItens">R$ --</span></div>
            <div class="row"><span>Taxa de entrega</span><span id="resumoEntrega">R$ --</span></div>
            <div class="row"><span>Subtotal</span><span id="resumoSubtotal">R$ --</span></div>
            <div class="row"><span id="resumoDescontoLabel">Desconto</span><span id="resumoDesconto">R$ --</span></div>
            <div class="row total"><span>Total</span><span id="resumoTotal">R$ --</span></div>
          </div>
          <div class="help" id="deliveryInfo" style="margin-top:8px; color:#666;"></div>
          <div class="step-actions" style="margin-top:16px; display:flex; justify-content:flex-end;">
            <a href="#" class="btn-primary" id="goPayment" data-checkout-finalize="1">Prosseguir para pagamento</a>
          </div>
        </section>
      </div>
    </div>
  </main>

  <script src="../../assets/js/shared/nav.js"></script>
  <script src="../../assets/js/shared/layout.js"></script>
  <script src="../../assets/js/shared/auth.js"></script>
  <script src="../../assets/js/customer/checkout.js"></script>
  <script src="../../assets/js/shared/page-title.js"></script>

  <!-- Modal reutilizando estilos existentes (modalBody.modal) -->
  <div class="modalArea" id="storeClosedModal" style="display:none;" role="dialog" aria-modal="true" aria-labelledby="storeClosedTitle">
    <div class="modalBody modal" style="max-width:560px; width:96%; display:block; position:relative;">
      <div class="rating-content">
        <h3 id="storeClosedTitle" class="rating-title">Estamos fechados no momento</h3>
        <p id="storeClosedMsg" class="rating-subtitle">Volte mais tarde para finalizar seu pedido.</p>
        <button id="storeClosedOk" class="btn-primary" style="margin-top:10px;">Entendi</button>
      </div>
    </div>
  </div>

  <footer class="modern-footer">
    <div class="footer-container">
      <div class="footer-bottom">
        <div class="footer-credits">
          <p>&copy; 2025 Estabelecimento. Todos os direitos reservados.</p>
          <p class="dev-credit">
            <a href="https://github.com/pabloedusilva" target="_blank" rel="noopener noreferrer">
              Desenvolvido por Pablo Silva
            </a>
          </p>
        </div>
      </div>
    </div>
  </footer>
</body>
</html>